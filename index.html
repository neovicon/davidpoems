<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>David's Poems</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f4f8;
        display: flex;
        justify-content: center;
        padding: 20px;
        transition: background 0.3s;
    }

    .dark {
        background: #1b1b1d;
        color: white;
    }

    .container {
        width: 100%;
        max-width: 650px;
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        transition: background 0.3s;
    }

    .dark .container {
        background: #2a2a2e;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 30px;
    }

    textarea {
        width: 100%;
        height: 130px;
        padding: 10px;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #ccc;
        resize: vertical;
    }

    .top-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }

    input {
        flex: 1;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 16px;
    }

    button {
        padding: 10px 18px;
        background: #4a6eff;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        white-space: nowrap;
    }

    button:hover {
        background: #3a58d4;
    }

    .dark button {
        background: #596dff;
    }

    .poem {
        background: #f0f2ff;
        padding: 15px;
        border-radius: 10px;
        margin-top: 15px;
        white-space: pre-wrap;
        line-height: 1.5;
        position: relative;
        transition: background 0.3s;
    }

    .dark .poem {
        background: #3a3a42;
    }

    .actions {
        margin-top: 10px;
        display: flex;
        gap: 10px;
    }

    .edit-btn, .delete-btn {
        flex: 1;
        padding: 8px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 15px;
    }

    .edit-btn {
        background: #ffb84a;
    }

    .delete-btn {
        background: #ff4a4a;
        color: white;
    }

    .edit-btn:hover { background: #e89f2a; }
    .delete-btn:hover { background: #d93636; }

    .no-poems {
        text-align: center;
        margin-top: 20px;
        color: #777;
    }

</style>
</head>

<body>

<div class="container">
    <h1>David's Poems</h1>

    <div class="top-bar">
        <input id="searchInput" placeholder="Search poems..." oninput="loadPoems()" />
        <button onclick="toggleDarkMode()">Dark Mode</button>
    </div>

    <textarea id="poemInput" placeholder="Write a new poem..."></textarea>
    <button onclick="addPoem()">Save Poem</button>

    <div id="poemList"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        loadPoems();
        if (localStorage.getItem("dark_mode") === "enabled") {
            document.body.classList.add("dark");
        }
    });

    function addPoem() {
        const text = document.getElementById("poemInput").value.trim();
        if (!text) {
            alert("Poem is empty!");
            return;
        }

        let poems = JSON.parse(localStorage.getItem("david_poems")) || [];
        poems.push(text);

        localStorage.setItem("david_poems", JSON.stringify(poems));
        document.getElementById("poemInput").value = "";
        loadPoems();
    }

    function deletePoem(index) {
        let poems = JSON.parse(localStorage.getItem("david_poems")) || [];
        poems.splice(index, 1);
        localStorage.setItem("david_poems", JSON.stringify(poems));
        loadPoems();
    }

    function editPoem(index) {
        let poems = JSON.parse(localStorage.getItem("david_poems")) || [];
        const newText = prompt("Edit your poem:", poems[index]);

        if (newText !== null) {
            poems[index] = newText.trim();
            localStorage.setItem("david_poems", JSON.stringify(poems));
            loadPoems();
        }
    }

    function toggleDarkMode() {
        document.body.classList.toggle("dark");
        localStorage.setItem("dark_mode",
            document.body.classList.contains("dark") ? "enabled" : "disabled"
        );
    }

    function loadPoems() {
        const poemList = document.getElementById("poemList");
        const search = document.getElementById("searchInput").value.toLowerCase();
        poemList.innerHTML = "";

        let poems = JSON.parse(localStorage.getItem("david_poems")) || [];

        const filtered = poems.filter(p => p.toLowerCase().includes(search));

        if (filtered.length === 0) {
            poemList.innerHTML = "<p class='no-poems'>No poems found.</p>";
            return;
        }

        filtered.forEach((text, index) => {
            const div = document.createElement("div");
            div.className = "poem";
            div.textContent = text;

            const actions = document.createElement("div");
            actions.className = "actions";

            const editBtn = document.createElement("button");
            editBtn.className = "edit-btn";
            editBtn.textContent = "Edit";
            editBtn.onclick = () => editPoem(index);

            const delBtn = document.createElement("button");
            delBtn.className = "delete-btn";
            delBtn.textContent = "Delete";
            delBtn.onclick = () => deletePoem(index);

            actions.appendChild(editBtn);
            actions.appendChild(delBtn);

            div.appendChild(actions);
            poemList.appendChild(div);
        });
    }
</script>

</body>
</html>
